# FlxPedalV7-FlxMain
For Version 7, I replaced the single-core CM1 with a quad-core CM3, and then put the audio processing portion of the FlxMain code into a seperate process called FlxProcessing.  The Linux kernel runs on core 0, FlxMain runs on core 1, and FlxProcessing runs on core 2.  FlxMain sends combo and parameter changes through shared mapped memory in the for of a C-version of the ComboStruct struct (strings are replaced with char arrays, etc).

The second significant change to FlxMain is the replacing of the USB serial communications with a TCP/IP socket interface. The USB configuration is a composite gadget comprised of a serial port (ACMx) and an ethernet port (usb0).  Originally the serial connection was for communication with the FlxEditor, while the ethernet port was used for code upload/debug and connecting to the OS through an SSH shell using Putty.  The socket functioning (listening, connecting/disconnecting, read/write) was placed in a seperate thread to prevent the blocking behavior of the recv function from blocking the rest of the FlxMain process.  This thread used the C++11 thread API, and connected to the rest of the FlxMain process via C++11 queues. 
